# 📈 Stock Monitor（桌面股票监视器）

一个基于 **Python + PyQt6 + yfinance** 的桌面股票行情监视器，支持 **悬浮窗显示、系统托盘、老板键、锁定穿透、实时刷新、迷你走势图**，适合放在桌面角落实时观察行情。

---

## ✨ 功能特性

* 📊 **实时股票行情**（支持 A 股 / 美股，如 `000880.SZ`、`NVDA`）
* 📉 **涨跌幅颜色区分**（红涨 / 绿跌 / 白色持平）
* 📈 **迷你走势图（Sparkline）**
* 🕒 **底部更新时间显示**
* 🖥 **桌面悬浮窗（无边框、半透明）**
* 🔝 **置顶显示**（防止被其他窗口遮挡）
* 🔒 **锁定模式**（鼠标事件穿透，不影响操作）
* 👁 **老板键**（一键隐藏 / 显示）
* 🧩 **系统托盘菜单**（添加 / 删除股票、锁定、退出）
* 💾 **配置自动保存**（窗口位置、股票列表、锁定状态）

---

## 🧱 技术栈

* Python 3.9+
* PyQt6
* yfinance
* Qt X11 (Linux 桌面环境)

---

## 📦 安装依赖

建议使用 **虚拟环境**：

```bash
python3 -m venv venv
source venv/bin/activate
pip install pyqt6 yfinance
```

> ⚠️ Debian / Ubuntu 若遇到 `externally-managed-environment` 错误，请务必使用虚拟环境。

---

## ▶️ 运行方式

```bash
python main.py
```

程序启动后会：

* 显示桌面悬浮窗
* 在系统托盘生成图标
* 每 15 秒自动刷新行情

---

## 🖱 使用说明

### 🖥 悬浮窗操作

| 操作   | 说明        |
| ---- | --------- |
| 左键拖动 | 移动窗口      |
| 左键双击 | 老板键（隐藏窗口） |
| 右键点击 | 打开托盘菜单    |

### 🔒 锁定模式

* 锁定后：

  * 窗口无法拖动
  * 鼠标事件穿透（不影响下方窗口）
  * 始终置顶

---

## 🧰 系统托盘菜单

* 👁 老板键（显示 / 隐藏）
* 🔒 锁定 / 解锁
* ➕ 添加股票
* ➖ 删除股票
* ❌ 退出程序

---

## ⚙️ 配置文件

程序目录下会自动生成(配置文件)：

```json
stock_config.json
```

---

## ⏱ 刷新策略

* 刷新周期：**15 秒**
* 使用 `QThread` 后台拉取行情
* 单股票逐个请求，稳定性优先

---

## 🐧 平台说明

* ✅ Linux（X11）
* ⚠️ Wayland 可能需要调整 `QT_QPA_PLATFORM`
* ❌ Windows / macOS 未测试


